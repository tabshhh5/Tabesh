# ุฑุงูููุง ุชุณุช ุชุนูุฑุงุช ููุชูุฑ ููุชโฺฏุฐุงุฑ V2

## ููุง ฺฉู

ุงู ุณูุฏ ุฑุงูููุง ฺฉุงูู ุชุณุช ุชุนูุฑุงุช ุงูุฌุงู ุดุฏู ุจุฑุง ุฑูุน ูุดฺฉูุงุช Pricing Engine V2 ุงุณุช.

## โ ฺฺฉโูุณุช ุชุณุชโูุง ุงูุฒุงู

### 1๏ธโฃ ุชุณุช ูุญุงุณุจู ููุช ู ุซุจุช ุณูุงุฑุด

#### ุชุณุช ูุฑู ฺฉุงุฑุจุฑ `[tabesh_order_form]`

**ูพุดโูุงุฒูุง:**
- ููุชูุฑ V2 ูุนุงู ุจุงุดุฏ
- ุญุฏุงูู ฺฉ book size ุจุง pricing matrix ฺฉุงูู ุชูุธู ุดุฏู ุจุงุดุฏ

**ูุฑุงุญู ุชุณุช:**

1. **ุชุณุช ูุญุงุณุจู ุณุงุฏู:**
   ```
   - ูุทุน: A5
   - ููุน ฺฉุงุบุฐ: ุชุญุฑุฑ
   - ฺฏุฑูุงฺ: 70
   - ุตูุญุงุช ุณุงูโูุณูุฏ: 100
   - ุตูุญุงุช ุฑูฺฏ: 0
   - ุชุฑุงฺ: 50
   - ุตุญุงู: ุดููุฒ
   ```
   โ **ุงูุชุธุงุฑ:** ููุช ูุญุงุณุจู ุดูุฏ ุจุฏูู ุฎุทุง
   โ **ุงูุชุธุงุฑ:** ููุฏุงุฑ ุนุฏุฏ ุตุญุญ ุจุฑฺฏุฑุฏุฏ (ูู nullุ ูู NaN)

2. **ุชุณุช ุชุฑฺฉุจ (ุฑูฺฏ + ุณุงูโูุณูุฏ):**
   ```
   - ุตูุญุงุช ุณุงูโูุณูุฏ: 80
   - ุตูุญุงุช ุฑูฺฏ: 20
   - ุณุงุฑ ูพุงุฑุงูุชุฑูุง ูุดุงุจู ุจุงูุง
   ```
   โ **ุงูุชุธุงุฑ:** ููุช ุตุญุญ ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ูุฑ ุฏู ููุน ฺุงูพ

3. **ุชุณุช ุจุง extras:**
   ```
   - ููุงู ูพุงุฑุงูุชุฑูุง ุจุงูุง
   - extras: ูุจ ฺฏุฑุฏ + ุดุฑูฺฉ
   ```
   โ **ุงูุชุธุงุฑ:** ููุช ุดุงูู ูุฒูู extras

4. **ุชุณุช validation:**
   ```
   - ุชุฑุงฺ: 0 ุง ุฎุงู
   ```
   โ **ุงูุชุธุงุฑ:** ูพุงู ุฎุทุง: "ุชุนุฏุงุฏ (ุชุฑุงฺ) ุจุงุฏ ุจุดุชุฑ ุงุฒ ุตูุฑ ุจุงุดุฏ"
   
   ```
   - ุตูุญุงุช: 0 (ูู ุฑูฺฏ ูู ุณุงูโูุณูุฏ)
   ```
   โ **ุงูุชุธุงุฑ:** ูพุงู ุฎุทุง: "ุชุนุฏุงุฏ ุตูุญุงุช ุจุงุฏ ุจุดุชุฑ ุงุฒ ุตูุฑ ุจุงุดุฏ"

5. **ุชุณุช ุซุจุช ุณูุงุฑุด:**
   - ูุญุงุณุจู ููุช ฺฉูุฏ
   - ูุฑู ุฑุง ฺฉุงูู ูพุฑ ฺฉูุฏ
   - ุณูุงุฑุด ุฑุง ุซุจุช ฺฉูุฏ
   
   โ **ุงูุชุธุงุฑ:** ุณูุงุฑุด ุจุง ููููุช ุซุจุช ุดูุฏ
   โ **ุงูุชุธุงุฑ:** ููุช ุฐุฎุฑู ุดุฏู ุตุญุญ ุจุงุดุฏ
   โ **ุงูุชุธุงุฑ:** ุชุฑุงฺ ู ุชุนุฏุงุฏ ุตูุญุงุช ุตุญุญ ุฐุฎุฑู ุดูุฏ

#### ุชุณุช ูุฑู ุงุฏูู `[tabesh_admin_order_form]`

ููุงู ูุฑุงุญู ุจุงูุง ุฑุง ุชฺฉุฑุงุฑ ฺฉูุฏ ุจุง ุงู ุชูุงูุชโูุง:

1. **ุชุณุช ุจุง ฺฉุงุฑุจุฑ ููุฌูุฏ:**
   - ฺฉ ฺฉุงุฑุจุฑ ุฑุง ุฌุณุชุฌู ู ุงูุชุฎุงุจ ฺฉูุฏ
   - ุณูุงุฑุด ุฑุง ุซุจุช ฺฉูุฏ
   
   โ **ุงูุชุธุงุฑ:** ุณูุงุฑุด ุจู ฺฉุงุฑุจุฑ ุตุญุญ ุงุฎุชุตุงุต ุงุจุฏ

2. **ุชุณุช ุจุง ฺฉุงุฑุจุฑ ุฌุฏุฏ:**
   - ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ
   - ุณูุงุฑุด ุฑุง ุจุฑุง ฺฉุงุฑุจุฑ ุฌุฏุฏ ุซุจุช ฺฉูุฏ
   
   โ **ุงูุชุธุงุฑ:** ฺฉุงุฑุจุฑ ุงุฌุงุฏ ุดูุฏ ู ุณูุงุฑุด ุจู ุขู ุงุฎุชุตุงุต ุงุจุฏ

3. **ุชุณุช ููุช ุฏุณุช:**
   - ูุญุงุณุจู ููุช ฺฉูุฏ
   - ฺฏุฒูู "ููุช ุฏูุฎูุงู" ุฑุง ูุนุงู ฺฉูุฏ
   - ููุช ุฏูุฎูุงู ูุงุฑุฏ ฺฉูุฏ
   - ุณูุงุฑุด ุฑุง ุซุจุช ฺฉูุฏ
   
   โ **ุงูุชุธุงุฑ:** ููุช ุฏูุฎูุงู ุจู ุฌุง ููุช ูุญุงุณุจู ุดุฏู ุฐุฎุฑู ุดูุฏ

### 2๏ธโฃ ุชุณุช Fallback ุจู V1

**ูุฑุงุญู:**

1. ููุชูุฑ V2 ุฑุง ุบุฑูุนุงู ฺฉูุฏ:
   ```sql
   UPDATE wp_tabesh_settings 
   SET setting_value = '0' 
   WHERE setting_key = 'pricing_engine_v2_enabled';
   ```

2. ูุญุงุณุจู ููุช ุฑุง ุฏุฑ ูุฑู ฺฉุงุฑุจุฑ ุงูุชุญุงู ฺฉูุฏ

   โ **ุงูุชุธุงุฑ:** ููุช ุจุง ููุชูุฑ V1 ูุญุงุณุจู ุดูุฏ
   โ **ุงูุชุธุงุฑ:** ูฺ ุฎุทุง ุฑุฎ ูุฏูุฏ
   โ **ุงูุชุธุงุฑ:** ุฏุฑ debug log ูพุงู "Using Legacy Pricing Engine V1" ููุงุด ุงุจุฏ

3. ููุชูุฑ V2 ุฑุง ุฏูุจุงุฑู ูุนุงู ฺฉูุฏ:
   ```sql
   UPDATE wp_tabesh_settings 
   SET setting_value = '1' 
   WHERE setting_key = 'pricing_engine_v2_enabled';
   ```

4. ูุญุงุณุจู ููุช ุฑุง ุฏูุจุงุฑู ุงูุชุญุงู ฺฉูุฏ

   โ **ุงูุชุธุงุฑ:** ููุช ุจุง ููุชูุฑ V2 ูุญุงุณุจู ุดูุฏ
   โ **ุงูุชุธุงุฑ:** ุฏุฑ debug log ูพุงู "Using Pricing Engine V2" ููุงุด ุงุจุฏ

### 3๏ธโฃ ุชุณุช UI/UX ุดูุฑุชฺฉุฏ ููุชโฺฏุฐุงุฑ

**ุชุณุช ุธุงูุฑ:**

1. ุจู ุตูุญูโุง ุจุง ุดูุฑุชฺฉุฏ `[tabesh_product_pricing]` ุจุฑูุฏ

   โ **ุงูุชุธุงุฑ:** CSS ููุฏ ุดุฏู ู ุงุณุชุงูโูุง ุงุนูุงู ุดุฏู ุจุงุดุฏ
   โ **ุงูุชุธุงุฑ:** ูููุชโูุง ุฎูุงูุง ู spacing ููุงุณุจ ุจุงุดุฏ
   โ **ุงูุชุธุงุฑ:** ุฑูฺฏโุจูุฏ ููุทู ู ุญุฑููโุง

2. **ุชุณุช RTL:**
   - ุฒุจุงู ุณุงุช ุฑุง ุจู ูุงุฑุณ ุชุบุฑ ุฏูุฏ
   
   โ **ุงูุชุธุงุฑ:** ููู ุนูุงุตุฑ ุฑุงุณุชโฺู ุจุงุดูุฏ
   โ **ุงูุชุธุงุฑ:** ูุงุตููโฺฏุฐุงุฑโูุง ุฏุฑ ุฌูุช ุตุญุญ ุจุงุดุฏ

3. **ุชุณุช Responsive:**
   - ุณุงุฒ ูพูุฌุฑู ูุฑูุฑฺฏุฑ ุฑุง ฺฉูฺฺฉ ฺฉูุฏ (ููุจุงู)
   
   โ **ุงูุชุธุงุฑ:** UI ุจู ุฏุฑุณุช ุชุทุจู ุงุจุฏ
   โ **ุงูุชุธุงุฑ:** ุฌุฏุงูู ู ูุฑูโูุง ูุงุจู ุงุณุชูุงุฏู ุจุงุดูุฏ

4. **ุชุณุช ุชุฏุงุฎู ุจุง ุณุงุฑ ุจุฎุดโูุง:**
   - ุจู ุตูุญุงุช ุจุง ุณุงุฑ ุดูุฑุชฺฉุฏูุง ุจุฑูุฏ
   
   โ **ุงูุชุธุงุฑ:** CSS ุดูุฑุชฺฉุฏ ููุชโฺฏุฐุงุฑ ุณุงุฑ ุจุฎุดโูุง ุฑุง ุฎุฑุงุจ ูฺฉูุฏ

### 4๏ธโฃ ุชุณุช ฺฉูุชุฑู ุฏุณุชุฑุณ

**ุชุณุช ุจุง ุฏุณุชุฑุณโูุง ูุฎุชูู:**

1. **ุชุณุช ุจุง Admin:**
   - ุจู ุนููุงู Admin ูุงุฑุฏ ุดูุฏ
   - ุจู ุตูุญู ุดูุฑุชฺฉุฏ ุจุฑูุฏ
   
   โ **ุงูุชุธุงุฑ:** ูุฑู ฺฉุงูู ููุงุด ุงุจุฏ

2. **ุชุณุช ุจุง Shop Manager:**
   - ุจู ุนููุงู Shop Manager ูุงุฑุฏ ุดูุฏ
   - ุจู ุตูุญู ุดูุฑุชฺฉุฏ ุจุฑูุฏ
   
   โ **ุงูุชุธุงุฑ:** ูุฑู ููุงุด ุงุจุฏ (ุงฺฏุฑ capability = manage_woocommerce)

3. **ุชุณุช ุจุง ฺฉุงุฑุจุฑ ุนุงุฏ:**
   - ุจู ุนููุงู ฺฉุงุฑุจุฑ ุนุงุฏ (ูุดุชุฑ) ูุงุฑุฏ ุดูุฏ
   - ุจู ุตูุญู ุดูุฑุชฺฉุฏ ุจุฑูุฏ
   
   โ **ุงูุชุธุงุฑ:** ูพุงู ุฎุทุง: "ุดูุง ุฏุณุชุฑุณ ุจู ุงู ุจุฎุด ุฑุง ูุฏุงุฑุฏ"
   โ **ุงูุชุธุงุฑ:** ูุฑู ููุงุด ุฏุงุฏู ูุดูุฏ

4. **ุชุณุช ุชุบุฑ capability:**
   ```sql
   UPDATE wp_tabesh_settings 
   SET setting_value = 'edit_shop_orders' 
   WHERE setting_key = 'pricing_access_capability';
   ```
   
   - ุจู ุนููุงู Staff ูุงุฑุฏ ุดูุฏ
   - ุจู ุตูุญู ุดูุฑุชฺฉุฏ ุจุฑูุฏ
   
   โ **ุงูุชุธุงุฑ:** ูุฑู ููุงุด ุงุจุฏ

### 5๏ธโฃ ุชุณุช ฺุฑุฎู ฺฉุงูู ุงูุฒููู

**ุชุณุช ฺฉูพุงุฑฺฺฏ:**

1. **ุชุณุช ุขูพููุฏ ูุงู:**
   - ฺฉ ุณูุงุฑุด ุซุจุช ฺฉูุฏ
   - ูุงู ุขูพููุฏ ฺฉูุฏ
   
   โ **ุงูุชุธุงุฑ:** ุขูพููุฏ ุจุฏูู ูุดฺฉู ุงูุฌุงู ุดูุฏ
   โ **ุงูุชุธุงุฑ:** ููุช ุณูุงุฑุด ุชุบุฑ ูฺฉูุฏ

2. **ุชุณุช ุงุฑุณุงู SMS:**
   - ฺฉ ุณูุงุฑุด ุซุจุช ฺฉูุฏ
   - ูุถุนุช ุฑุง ุชุบุฑ ุฏูุฏ
   
   โ **ุงูุชุธุงุฑ:** SMS ุงุฑุณุงู ุดูุฏ (ุงฺฏุฑ ูุนุงู ุจุงุดุฏ)
   โ **ุงูุชุธุงุฑ:** ููุช ุฏุฑ SMS ุตุญุญ ุจุงุดุฏ

3. **ุชุณุช ุณุงุฑ ุดูุฑุชฺฉุฏูุง:**
   - `[tabesh_user_orders]`
   - `[tabesh_admin_dashboard]`
   - `[tabesh_upload_manager]`
   
   โ **ุงูุชุธุงุฑ:** ููู ุดูุฑุชฺฉุฏูุง ุจุฏูู ูุดฺฉู ฺฉุงุฑ ฺฉููุฏ

## ๐ Debug ู Troubleshooting

### ูุนุงู ฺฉุฑุฏู Debug Mode

ุฏุฑ `wp-config.php`:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

### ุจุฑุฑุณ Logs

```bash
tail -f wp-content/debug.log
```

**ูพุงูโูุง ฺฉูุฏ:**

```
Tabesh: Using Pricing Engine V2 (Matrix-based)
Tabesh Pricing Engine V2: calculate_price called
Tabesh REST: Calculation successful
```

### ูุดฺฉูุงุช ุฑุงุฌ

**ูุดฺฉู:** ููุช null ุง NaN ุงุณุช
- โ **ุฑุงูโุญู:** ุจุฑุฑุณ ฺฉูุฏ pricing matrix ุจุฑุง book size ุชูุธู ุดุฏู ุจุงุดุฏ
- โ **ุฑุงูโุญู:** ุจุฑุฑุณ ฺฉูุฏ paper_typeุ paper_weightุ binding_type ุฏุฑ matrix ููุฌูุฏ ุจุงุดูุฏ

**ูุดฺฉู:** ูุฑู ุซุจุช ููโุดูุฏ
- โ **ุฑุงูโุญู:** ุจุฑุฑุณ ฺฉูุฏ validation ูพุงุณ ุดุฏู ุจุงุดุฏ
- โ **ุฑุงูโุญู:** ุจุฑุฑุณ ฺฉูุฏ nonce ุตุญุญ ุจุงุดุฏ

**ูุดฺฉู:** CSS ููุฏ ููโุดูุฏ
- โ **ุฑุงูโุญู:** cache browser ุฑุง ูพุงฺฉ ฺฉูุฏ
- โ **ุฑุงูโุญู:** ุจุฑุฑุณ ฺฉูุฏ ูุงู CSS ุฏุฑ ูุณุฑ ุตุญุญ ุจุงุดุฏ

## ๐ ูุนุงุฑูุง ููููุช

ุชุณุชโูุง ุฒูุงู ูููู ูุณุชูุฏ ฺฉู:

- โ ููู ูุญุงุณุจุงุช ููุช ุตุญุญ ุจุงุดุฏ
- โ ูฺ ููุฏุงุฑ null ุง NaN ุจุฑฺฏุฑุฏุงูุฏู ูุดูุฏ
- โ fallback ุจู V1 ุจุฏูู ูุดฺฉู ฺฉุงุฑ ฺฉูุฏ
- โ UI/UX ูุฏุฑู ู ุญุฑููโุง ุจุงุดุฏ
- โ ฺฉูุชุฑู ุฏุณุชุฑุณ ุจู ุฏุฑุณุช ุนูู ฺฉูุฏ
- โ ูฺ breaking change ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ
- โ ููู ุดูุฑุชฺฉุฏูุง ุณุงูู ฺฉุงุฑ ฺฉููุฏ

## ๐ ฺฏุฒุงุฑุด ูุชุงุฌ

ุจุฑุง ูุฑ ุชุณุชุ ูุถุนุช ุฑุง ุงุฏุฏุงุดุช ฺฉูุฏ:

- โ **PASS** - ุชุณุช ูููู
- โ **FAIL** - ุชุณุช ูุงูููู
- โ๏ธ **WARNING** - ูุดฺฉู ุฌุฒุฆ ุงูุง ูุงุจู ูุจูู

**ููููู ฺฏุฒุงุฑุด:**

```
ุชุงุฑุฎ: 2024-12-17
ุชุณุชโฺฉููุฏู: [ูุงู]

1. ูุญุงุณุจู ููุช ูุฑู ฺฉุงุฑุจุฑ: โ PASS
2. ูุญุงุณุจู ููุช ูุฑู ุงุฏูู: โ PASS
3. Fallback ุจู V1: โ PASS
4. UI/UX ุดูุฑุชฺฉุฏ: โ PASS
5. ฺฉูุชุฑู ุฏุณุชุฑุณ: โ PASS
6. ฺุฑุฎู ฺฉุงูู: โ PASS
```
