/**
 * AI Instant Highlight Styles
 *
 * Styles for instant tour guide highlighting and field explanations.
 *
 * @package Tabesh
 */

/* Field Explanation Tooltip */
.tabesh-field-explanation-tooltip {
	position: fixed;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	color: #fff;
	padding: 12px 16px;
	border-radius: 12px;
	box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
	max-width: 350px;
	z-index: 100000;
	opacity: 0;
	transform: translateY(-10px);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	pointer-events: none;
}

.tabesh-field-explanation-tooltip.show {
	opacity: 1;
	transform: translateY(0);
}

.tabesh-field-explanation-tooltip::before {
	content: '';
	position: absolute;
	top: -8px;
	left: 20px;
	width: 0;
	height: 0;
	border-left: 8px solid transparent;
	border-right: 8px solid transparent;
	border-bottom: 8px solid #667eea;
}

.explanation-content {
	display: flex;
	align-items: flex-start;
	gap: 10px;
	font-size: 14px;
	line-height: 1.5;
}

.explanation-icon {
	font-size: 20px;
	flex-shrink: 0;
	margin-top: 2px;
}

.explanation-text {
	flex: 1;
}

/* Instant Highlight Overlay */
.tabesh-ai-instant-highlight {
	position: fixed;
	z-index: 99999;
	pointer-events: none;
	animation: highlightFadeIn 0.3s ease-out;
}

@keyframes highlightFadeIn {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

/* Pulse Ring Effect */
.pulse-ring {
	position: absolute;
	top: -10px;
	left: -10px;
	right: -10px;
	bottom: -10px;
	border: 4px solid #667eea;
	border-radius: 12px;
	animation: pulseRing 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulseRing {
	0%, 100% {
		transform: scale(1);
		opacity: 1;
	}
	50% {
		transform: scale(1.05);
		opacity: 0.7;
	}
}

.pulse-ring::before {
	content: '';
	position: absolute;
	inset: -8px;
	border: 3px solid rgba(102, 126, 234, 0.3);
	border-radius: 16px;
	animation: pulseRingOuter 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
	animation-delay: 0.3s;
}

@keyframes pulseRingOuter {
	0%, 100% {
		transform: scale(1);
		opacity: 0;
	}
	50% {
		transform: scale(1.1);
		opacity: 1;
	}
}

/* Red Flag Highlight for Confused Users */
.tabesh-ai-instant-highlight.red-flag .pulse-ring {
	border-color: #ff4757;
	animation: flashRed 1s ease-in-out infinite;
}

@keyframes flashRed {
	0%, 100% {
		border-color: #ff4757;
		box-shadow: 0 0 0 4px rgba(255, 71, 87, 0.3);
	}
	50% {
		border-color: #ff6b7a;
		box-shadow: 0 0 0 8px rgba(255, 71, 87, 0.5);
	}
}

/* Arrow Pointer */
.arrow-pointer {
	position: absolute;
	width: 60px;
	height: 60px;
	z-index: 2;
}

.arrow-pointer::before {
	content: '';
	position: absolute;
	width: 0;
	height: 0;
	border: 15px solid transparent;
}

/* Arrow positions and animations */
.tabesh-ai-instant-highlight[data-arrow="top"] .arrow-pointer {
	top: -70px;
	left: 50%;
	transform: translateX(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="top"] .arrow-pointer::before {
	border-top-color: #667eea;
	animation: bounceArrowTop 1s ease-in-out infinite;
}

@keyframes bounceArrowTop {
	0%, 100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-10px);
	}
}

.tabesh-ai-instant-highlight[data-arrow="bottom"] .arrow-pointer {
	bottom: -70px;
	left: 50%;
	transform: translateX(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="bottom"] .arrow-pointer::before {
	border-bottom-color: #667eea;
	animation: bounceArrowBottom 1s ease-in-out infinite;
}

@keyframes bounceArrowBottom {
	0%, 100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(10px);
	}
}

.tabesh-ai-instant-highlight[data-arrow="left"] .arrow-pointer {
	left: -70px;
	top: 50%;
	transform: translateY(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="left"] .arrow-pointer::before {
	border-left-color: #667eea;
	animation: bounceArrowLeft 1s ease-in-out infinite;
}

@keyframes bounceArrowLeft {
	0%, 100% {
		transform: translateX(0);
	}
	50% {
		transform: translateX(-10px);
	}
}

.tabesh-ai-instant-highlight[data-arrow="right"] .arrow-pointer {
	right: -70px;
	top: 50%;
	transform: translateY(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="right"] .arrow-pointer::before {
	border-right-color: #667eea;
	animation: bounceArrowRight 1s ease-in-out infinite;
}

@keyframes bounceArrowRight {
	0%, 100% {
		transform: translateX(0);
	}
	50% {
		transform: translateX(10px);
	}
}

/* Tooltip Message */
.tooltip-message {
	position: absolute;
	background: #fff;
	color: #1e293b;
	padding: 12px 16px;
	border-radius: 12px;
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
	font-size: 14px;
	line-height: 1.5;
	max-width: 250px;
	z-index: 3;
	animation: tooltipFadeIn 0.3s ease-out 0.3s both;
}

@keyframes tooltipFadeIn {
	from {
		opacity: 0;
		transform: scale(0.9);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

/* Position tooltip based on arrow */
.tabesh-ai-instant-highlight[data-arrow="top"] .tooltip-message {
	top: -140px;
	left: 50%;
	transform: translateX(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="bottom"] .tooltip-message {
	bottom: -140px;
	left: 50%;
	transform: translateX(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="left"] .tooltip-message {
	left: -280px;
	top: 50%;
	transform: translateY(-50%);
}

.tabesh-ai-instant-highlight[data-arrow="right"] .tooltip-message {
	right: -280px;
	top: 50%;
	transform: translateY(-50%);
}

/* Spotlight Effect */
.tabesh-ai-spotlight {
	position: absolute;
	top: -50%;
	left: -50%;
	width: 200%;
	height: 200%;
	background: radial-gradient(circle, rgba(102, 126, 234, 0.15) 0%, transparent 60%);
	animation: rotateSpotlight 4s linear infinite;
	pointer-events: none;
	z-index: 1;
}

@keyframes rotateSpotlight {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

/* Mobile Responsive */
@media screen and (max-width: 768px) {
	.tabesh-field-explanation-tooltip {
		max-width: calc(100vw - 40px);
		left: 20px !important;
		right: 20px;
	}

	.tooltip-message {
		max-width: calc(100vw - 60px);
		font-size: 13px;
	}

	/* Simplify arrows on mobile */
	.arrow-pointer {
		width: 40px;
		height: 40px;
	}

	.arrow-pointer::before {
		border-width: 10px;
	}
}

/* RTL Support */
[dir="rtl"] .tabesh-field-explanation-tooltip::before {
	left: auto;
	right: 20px;
}

[dir="rtl"] .explanation-content {
	direction: rtl;
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
	.tabesh-field-explanation-tooltip,
	.tabesh-ai-instant-highlight,
	.pulse-ring,
	.arrow-pointer::before,
	.tooltip-message,
	.tabesh-ai-spotlight {
		animation: none !important;
		transition: none !important;
	}
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
	.tabesh-field-explanation-tooltip {
		background: #000;
		border: 2px solid #fff;
	}

	.pulse-ring {
		border-color: #fff;
		border-width: 3px;
	}
}
