# ุฎูุงุตู ูู: ุฑูุน ุงุดฺฉุงู ูุญุงุณุจู ุฎุฏูุงุช ุงุถุงู
**ุชุงุฑุฎ**: ฑดฐณ/ฑฐ/ฐฑ (ฒฐฒต/ฑฒ/ฒฑ)  
**ูุณุฎู**: ฒ.ฐ.ฐ

---

## ๐ฏ ูุดฺฉู ุงุตู

ุฏุฑ ุงูุฒููู Tabeshุ ุณู ููุน ุฎุฏูุงุช ุงุถุงู (ูุงููุฏ ุณููููุ ูุจ ฺฏุฑุฏุ ุทุฑุงุญ) ูุฌูุฏ ุฏุงุดุช ฺฉู ูุญุงุณุจู ุขููุง ุฏฺุงุฑ ุงุดฺฉุงู ุจูุฏ:

### ฑ. ุฎุฏูุงุช ุซุงุจุช (Fixed) 
**ูุซุงู**: ุณูููู = ตฐูฌฐฐฐ ุชููุงู

| ูุจู ุงุฒ ุฑูุน ุงุดฺฉุงู โ | ุจุนุฏ ุงุฒ ุฑูุน ุงุดฺฉุงู โ |
|---------------------|---------------------|
| ตฐูฌฐฐฐ ร ฑฐ ุฌูุฏ = **ตฐฐูฌฐฐฐ ุชููุงู** | **ตฐูฌฐฐฐ ุชููุงู** (ฺฉุจุงุฑ) |

**ูุดฺฉู**: ููุช ุฏุฑ ุชุฑุงฺ ุถุฑุจ ูโุดุฏุ ุฏุฑ ุญุงู ฺฉู ุจุงุฏ ููุท ฺฉุจุงุฑ ุงุนูุงู ุดูุฏ.

---

### ฒ. ุฎุฏูุงุช ุจุฑ ุงุณุงุณ ุฌูุฏ (Per-Unit)
**ูุซุงู**: ูุจ ฺฏุฑุฏ = ฒูฌฐฐฐ ุชููุงู ุจู ุงุฒุง ูุฑ ุฌูุฏ

| ูุจู ุงุฒ ุฑูุน ุงุดฺฉุงู โ | ุจุนุฏ ุงุฒ ุฑูุน ุงุดฺฉุงู โ |
|---------------------|---------------------|
| (ฒูฌฐฐฐ ร ฑฐ) ร ฑฐ = **ฒฐฐูฌฐฐฐ ุชููุงู** | ฒูฌฐฐฐ ร ฑฐ = **ฒฐูฌฐฐฐ ุชููุงู** |

**ูุดฺฉู**: ููุช ุฏู ุจุงุฑ ุฏุฑ ุชุฑุงฺ ุถุฑุจ ูโุดุฏ (ุถุฑุจ ูุถุงุนู).

---

### ณ. ุฎุฏูุงุช ุจุฑ ุงุณุงุณ ุตูุญู (Page-Based)
**ูุซุงู**: ุทุฑุงุญ = ฑฐฐูฌฐฐฐ ุชููุงู ุจู ุงุฒุง ูุฑ ดูฌฐฐฐ ุตูุญู

**ุญุงูุช ุงูู**: ุณูุงุฑุด ฑฐ ุฌูุฏ ร ฒฐฐ ุตูุญู = ฒูฌฐฐฐ ุตูุญู (ฺฉูุชุฑ ุงุฒ ดูฌฐฐฐ)

| ูุจู ุงุฒ ุฑูุน ุงุดฺฉุงู โ | ุจุนุฏ ุงุฒ ุฑูุน ุงุดฺฉุงู โ |
|---------------------|---------------------|
| ฑฐฐูฌฐฐฐ ร ฐ.ต ูุงุญุฏ ร ฑฐ = **ตฐฐูฌฐฐฐ ุชููุงู** | ฑฐฐูฌฐฐฐ ร ฑ ูุงุญุฏ = **ฑฐฐูฌฐฐฐ ุชููุงู** |

**ุญุงูุช ุฏูู**: ุณูุงุฑุด ฑฐ ุฌูุฏ ร ดตฐ ุตูุญู = ดูฌตฐฐ ุตูุญู (ุจุดุชุฑ ุงุฒ ดูฌฐฐฐ)

| ูุจู ุงุฒ ุฑูุน ุงุดฺฉุงู โ | ุจุนุฏ ุงุฒ ุฑูุน ุงุดฺฉุงู โ |
|---------------------|---------------------|
| ฑฐฐูฌฐฐฐ ร ฒ ูุงุญุฏ ร ฑฐ = **ฒูฌฐฐฐูฌฐฐฐ ุชููุงู** | ฑฐฐูฌฐฐฐ ร ฒ ูุงุญุฏ = **ฒฐฐูฌฐฐฐ ุชููุงู** |

**ูุดฺฉูุงุช**:
1. ููุช ุฏู ุจุงุฑ ุฏุฑ ุชุฑุงฺ ุถุฑุจ ูโุดุฏ
2. ุญุฏุงูู ฑ ูุงุญุฏ ฺฉุงูู ุชุถูู ููโุดุฏ (ูโุชูุงูุณุช ฐ.ต ูุงุญุฏ ุดูุฏ)

---

## โ ุฑุงูโุญู ูพุงุฏูโุณุงุฒ ุดุฏู

### ูุฑูููโูุง ุตุญุญ ูุญุงุณุจู

#### ฑ. ุฎุฏูุช ุซุงุจุช
```
ูุฒูู = ููุช (ููุท ฺฉุจุงุฑ)
```

#### ฒ. ุฎุฏูุช ุจุฑ ุงุณุงุณ ุฌูุฏ
```
ูุฒูู = ููุช ร ุชุฑุงฺ
```

#### ณ. ุฎุฏูุช ุจุฑ ุงุณุงุณ ุตูุญู
```
ูุงุญุฏูุง = ุญุฏุงูู(ฑ, ฺฏุฑุฏ_ุจู_ุจุงูุง(ูุฌููุน_ุตูุญุงุช รท ฺฏุงู))
ูุฒูู = ููุช ร ูุงุญุฏูุง
```

**ูฺฉุชู ููู**: ุฏุฑ ุชูุงู ููุงุฑุฏุ ูุฒูู ูุญุงุณุจู ุดุฏู ุฏฺฏุฑ ุฏุฑ ุชุฑุงฺ ุถุฑุจ ููโุดูุฏ.

---

## ๐ ูุชุงุฌ ุขุฒููู

ุชูุงู ต ุขุฒููู ุจุง ููููุช ูพุงุณ ุดุฏ:

| ุขุฒููู | ูุชุฌู |
|-------|-------|
| ฑ. ุฎุฏูุช ุซุงุจุช (ุณูููู) | โ ูููู |
| ฒ. ุฎุฏูุช ุจุฑ ุงุณุงุณ ุฌูุฏ (ูุจ ฺฏุฑุฏ) | โ ูููู |
| ณ. ุฎุฏูุช ุจุฑ ุงุณุงุณ ุตูุญู - ฺฉูุชุฑ ุงุฒ ุญุฏ | โ ูููู |
| ด. ุฎุฏูุช ุจุฑ ุงุณุงุณ ุตูุญู - ุจุดุชุฑ ุงุฒ ุญุฏ | โ ูููู |
| ต. ุฎุฏูุงุช ุชุฑฺฉุจ (ููู ุจุง ูู) | โ ูููู |

---

## ๐ง ูุงูโูุง ุชุบุฑ ุงูุชู

1. **`includes/handlers/class-tabesh-pricing-engine.php`**
   - ููุชูุฑ ููุชโฺฏุฐุงุฑ ูุณุฎู ฒ (ุฌุฏุฏ)
   - ุชุงุจุน `calculate_extras_cost()` - ูุตู ฺฉุงูู ูุฒููโูุง ุซุงุจุช ู ูุชุบุฑ
   - ุชุงุจุน `calculate_price()` - ุฌููฺฏุฑ ุงุฒ ุถุฑุจ ูุถุงุนู

2. **`includes/handlers/class-tabesh-order.php`**
   - ููุชูุฑ ููุชโฺฏุฐุงุฑ ูุณุฎู ฑ (ูุฏู)
   - ุฑูุน ุงุดฺฉุงู ูุญุงุณุจู page-based

3. **`test-extras-calculation.php`** (ุฌุฏุฏ)
   - ูุงู ุขุฒููู ุฎูุฏฺฉุงุฑ
   - ต ุณูุงุฑู ูุฎุชูู
   - ููุงุด ูุชุงุฌ ุจุง ุฌุฏุงูู ู ุฑูฺฏโุจูุฏ

4. **`EXTRAS_CALCULATION_FIX_REPORT.md`** (ุฌุฏุฏ)
   - ูุณุชูุฏุงุช ฺฉุงูู ุจู ุฏู ุฒุจุงู (ูุงุฑุณ/ุงูฺฏูุณ)
   - ูุซุงูโูุง ุนูู ุจุง ุงุนุฏุงุฏ ูุงูุน

---

## ๐ฐ ุชุฃุซุฑ ูุงู

### ูุซุงู ูุงูุน:
ุณูุงุฑุด ฑฐ ุฌูุฏ ฺฉุชุงุจ ฒฐฐ ุตูุญูโุง ุจุง ุฎุฏูุงุช:
- ุณูููู (ุซุงุจุช): ตฐูฌฐฐฐ ุชููุงู
- ูุจ ฺฏุฑุฏ (ุจุฑ ุงุณุงุณ ุฌูุฏ): ฒูฌฐฐฐ ุชููุงู
- ุทุฑุงุญ (ุจุฑ ุงุณุงุณ ุตูุญู - ฺฏุงู ดูฌฐฐฐ): ฑฐฐูฌฐฐฐ ุชููุงู

| ุดุฑุญ | ูุจู ุงุฒ ุฑูุน โ | ุจุนุฏ ุงุฒ ุฑูุน โ | ุงุฎุชูุงู |
|-----|--------------|--------------|--------|
| ุณูููู | ตฐฐูฌฐฐฐ | ตฐูฌฐฐฐ | -ดตฐูฌฐฐฐ |
| ูุจ ฺฏุฑุฏ | ฒฐฐูฌฐฐฐ | ฒฐูฌฐฐฐ | -ฑธฐูฌฐฐฐ |
| ุทุฑุงุญ | ฑูฌฐฐฐูฌฐฐฐ | ฑฐฐูฌฐฐฐ | -นฐฐูฌฐฐฐ |
| **ุฌูุน ฺฉู** | **ฑูฌทฐฐูฌฐฐฐ** | **ฑทฐูฌฐฐฐ** | **-ฑูฌตณฐูฌฐฐฐ** |

**ูุชุฌู**: ุฏุฑ ุงู ูุซุงูุ ููุช ุงุฒ ฑูฌทฐฐูฌฐฐฐ ุชููุงู ุจู ฑทฐูฌฐฐฐ ุชููุงู ฺฉุงูุด ุงูุช (ฑฐ ุจุฑุงุจุฑ!)

---

## ๐ ูุญูู ุงุฌุฑุง ุขุฒููู

ุจุฑุง ูุดุงูุฏู ูุชุงุฌ ุขุฒููู ุฏุฑ ูุฑูุฑฺฏุฑ:

```bash
php test-extras-calculation.php > test-results.html
```

ุณูพุณ ูุงู `test-results.html` ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ฺฉูุฏ.

---

## โจ ูุฒุงุง ุฑูุน ุงุดฺฉุงู

### ุจุฑุง ูุดุชุฑุงู:
- โ ููุชโูุง ุตุญุญ ู ููุตูุงูู
- โ ุดูุงูุช ฺฉุงูู ุฏุฑ ูุญุงุณุจุงุช
- โ ุงูุฒุงุด ุงุนุชูุงุฏ ุจู ุณุณุชู

### ุจุฑุง ูุฏุฑุงู:
- โ ุนุฏู ุฏุฑุงูุช ุดฺฉุงุช ุงุฒ ููุชโูุง ูุงุฏุฑุณุช
- โ ฺฉุงูุด ูพุดุชุจุงู ูุฑุชุจุท ุจุง ููุชโฺฏุฐุงุฑ
- โ ุงูุฒุงุด ุงุนุชุจุงุฑ ุณุณุชู

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู:
- โ ฺฉุฏ ุชูุฒ ู ูุงุจู ูฺฏูุฏุงุฑ
- โ ุชุณุชโูุง ุฎูุฏฺฉุงุฑ
- โ ูุณุชูุฏุงุช ุฌุงูุน

---

## ๐ ุงููุช ู ฺฉูุช

- โ ุชูุงู ุชุบุฑุงุช ุงุฒ ุงุณุชุงูุฏุงุฑุฏูุง WordPress ูพุฑู ูโฺฉููุฏ
- โ ุจุฑุฑุณ ุงููุช ุงูุฌุงู ุดุฏู
- โ ุจุฏูู ุขุณุจโูพุฐุฑ ุฌุฏุฏ
- โ ุณุงุฒฺฏุงุฑ ุจุง ูุณุฎูโูุง ูุจู

---

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ูุดุงูุฏู ูุฑฺฏููู ูุดฺฉู ุง ุณุคุงู:

1. ูุงู `EXTRAS_CALCULATION_FIX_REPORT.md` ุฑุง ูุทุงูุนู ฺฉูุฏ
2. ูุงู `test-extras-calculation.php` ุฑุง ุงุฌุฑุง ฺฉูุฏ
3. ูุชุงุฌ ุฑุง ุจุฑุฑุณ ู ุจุง ูุซุงูโูุง ููุฌูุฏ ููุงุณู ฺฉูุฏ

---

## ๐ ูุชุฌูโฺฏุฑ

ุงู ุฑูุน ุงุดฺฉุงู ุจุงุนุซ ูโุดูุฏ:
1. ููุชโฺฏุฐุงุฑ ุฏูู ู ุตุญุญ ุจุงุดุฏ
2. ูุดุชุฑุงู ุฑุถุงุช ุจุดุชุฑ ุฏุงุดุชู ุจุงุดูุฏ
3. ุณุณุชู ูุงุจู ุงุนุชูุงุฏุชุฑ ุดูุฏ

**ููู ฺุฒ ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช!** โ

---

**ูุณุฎู**: ฒ.ฐ.ฐ  
**ุชุงุฑุฎ**: ฑดฐณ/ฑฐ/ฐฑ  
**ูุถุนุช**: โ ฺฉุงูู ู ุขูุงุฏู ุจู ฺฉุงุฑ
