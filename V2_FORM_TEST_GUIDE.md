# ููุดู ุฑุงู ุชุณุช ู ุงุนุชุจุงุฑุณูุฌ ูุฑู V2

## ฺฺฉโูุณุช ูพุด ุงุฒ ุชุณุช

- [ ] Pricing Engine V2 ูุนุงู ุดุฏู ุงุณุช
- [ ] ุญุฏุงูู ฺฉ ูุงุชุฑุณ ููุช ุชูุธู ุดุฏู (ูุซูุงู A5)
- [ ] ุดูุฑุชฺฉุฏ `[tabesh_order_form_v2]` ุจู ุตูุญู ุงุถุงูู ุดุฏู
- [ ] ฺฉุงุฑุจุฑ ุชุณุช ูุงุฑุฏ ุณุณุชู ุดุฏู ุงุณุช
- [ ] WP_DEBUG ูุนุงู ุงุณุช (ุจุฑุง ุฏุจุงฺฏ)

## ุณูุงุฑู ุชุณุช ฺฉุงูู

### ูุฑุญูู 1: ุจุงุฑฺฏุฐุงุฑ ูุฑู

**ุงูุฏุงู:**
- ุจู ุตูุญูโุง ฺฉู ุดูุฑุชฺฉุฏ ุฑุง ุฏุงุฑุฏ ุจุฑูุฏ

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุฑู ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ ุนููุงู "ูุญุงุณุจู ููุช ฺุงูพ ฺฉุชุงุจ (ูุณุฎู ูพุดุฑูุชู)" ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ ููุฏ "ุนููุงู ฺฉุชุงุจ" ู dropdown "ูุทุน ฺฉุชุงุจ" ูุงุจู ูุดุงูุฏู ุงุณุช
- โ ุฏฺฉูู "ูุญุงุณุจู ููุช" ุบุฑูุนุงู ุงุณุช (disabled)

**ุฏุฑ ุตูุฑุช ุฎุทุง:**
- ุงฺฏุฑ ูพุงู "ูฺ ูุทุน ฺฉุชุงุจ ูพฺฉุฑุจูุฏ ูุดุฏู" ุฏุฏุฏ:
  - ุจู ุชูุธูุงุช ููุชโฺฏุฐุงุฑ ุจุฑูุฏ
  - V2 ุฑุง ูุนุงู ฺฉูุฏ
  - ูุงุชุฑุณ ููุช ุฑุง ุชูุธู ฺฉูุฏ

**ูุงฺฏโูุง ููุฑุฏ ุงูุชุธุงุฑ:**
```
Tabesh Order Form V2: Available book sizes count: 1 (ุง ุจุดุชุฑ)
```

### ูุฑุญูู 2: ุงูุชุฎุงุจ ูุทุน ฺฉุชุงุจ

**ุงูุฏุงู:**
- ุนููุงู ฺฉุชุงุจ ุฑุง ูุงุฑุฏ ฺฉูุฏ: "ฺฉุชุงุจ ุชุณุช"
- ูุทุน ฺฉุชุงุจ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "A5"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณูุช "ููุน ู ฺฏุฑูุงฺ ฺฉุงุบุฐ" (step 3) ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ dropdown "ููุน ฺฉุงุบุฐ" ูพุฑ ูโุดูุฏ ุจุง ฺฏุฒููโูุง ูุซู ุชุญุฑุฑุ ุจุงูฺฉุ ฺฏูุงุณู
- โ AJAX request ุจู `/wp-json/tabesh/v1/get-allowed-options` ุงุฑุณุงู ูโุดูุฏ

**ฺฺฉ Console ูุฑูุฑฺฏุฑ:**
```javascript
Book size selected: A5
Allowed options response: {success: true, data: {...}}
```

**ูุงฺฏโูุง ููุฑุฏ ุงูุชุธุงุฑ:**
```
Tabesh V2 API: get_allowed_options called for book_size: A5
Tabesh V2 API: Options returned - papers count: 3
Tabesh V2 API: Options returned - bindings count: 4
```

### ูุฑุญูู 3: ุงูุชุฎุงุจ ฺฉุงุบุฐ

**ุงูุฏุงู:**
- ููุน ฺฉุงุบุฐ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "ุชุญุฑุฑ"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ dropdown "ฺฏุฑูุงฺ ฺฉุงุบุฐ" ูพุฑ ูโุดูุฏ (ูุซูุงู 60ุ 70ุ 80 ฺฏุฑู)

**ุงูุฏุงู:**
- ฺฏุฑูุงฺ ฺฉุงุบุฐ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "70"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณูุช "ููุน ฺุงูพ" (step 4) ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ dropdown "ููุน ฺุงูพ" ูพุฑ ูโุดูุฏ (ุณุงู ู ุณูุฏุ ุฑูฺฏ)
- โ ุฏูุจุงุฑู AJAX request ุงุฑุณุงู ูโุดูุฏ

**ฺฺฉ Console:**
```javascript
Paper type selected: ุชุญุฑุฑ
Paper weight selected: 70
```

### ูุฑุญูู 4: ุงูุชุฎุงุจ ููุน ฺุงูพ ู ุชุนุฏุงุฏ ุตูุญุงุช

**ุงูุฏุงู:**
- ููุน ฺุงูพ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "ุณุงู ู ุณูุฏ"
- ูุณูุช "ุชุนุฏุงุฏ ุตูุญุงุช" (step 5) ุจุงุฏ ููุงุด ุฏุงุฏู ุดูุฏ
- ุชุนุฏุงุฏ ุตูุญุงุช ุฑุง ูุงุฑุฏ ฺฉูุฏ: ูุซูุงู "200"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณูุช "ุชุฑุงฺ" (step 6) ููุงุด ุฏุงุฏู ูโุดูุฏ

**ฺฺฉ Console:**
```javascript
Print type selected: bw
```

### ูุฑุญูู 5: ุชุฑุงฺ ู ุตุญุงู

**ุงูุฏุงู:**
- ุชุฑุงฺ ุฑุง ูุงุฑุฏ ฺฉูุฏ: ูุซูุงู "100"
- ูุณูุช "ููุน ุตุญุงู" (step 7) ุจุงุฏ ููุงุด ุฏุงุฏู ุดูุฏ
- ููุน ุตุญุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "ุดููุฒ"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณูุช "ฺฏุฑูุงฺ ุฌูุฏ" (step 8) ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ dropdown "ฺฏุฑูุงฺ ุฌูุฏ" ูพุฑ ูโุดูุฏ

**ุงูุฏุงู:**
- ฺฏุฑูุงฺ ุฌูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: ูุซูุงู "250"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณูุช "ุฎุฏูุงุช ุงุถุงู" (step 9) ู "ุชูุถุญุงุช" (step 10) ููุงุด ุฏุงุฏู ูโุดููุฏ
- โ ุฏฺฉูู "ูุญุงุณุจู ููุช" ูุนุงู ูโุดูุฏ (enabled)

### ูุฑุญูู 6: ูุญุงุณุจู ููุช

**ุงูุฏุงู:**
- ุฑู ุฏฺฉูู "ูุญุงุณุจู ููุช" ฺฉูฺฉ ฺฉูุฏ

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Loading overlay ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ AJAX request ุจู `/wp-json/tabesh/v1/calculate-price` ุงุฑุณุงู ูโุดูุฏ
- โ ููุช ููุงุด ุฏุงุฏู ูโุดูุฏ:
  - ููุช ูุฑ ุฌูุฏ: ูุซูุงู "45,000 ุชููุงู"
  - ุชุนุฏุงุฏ: "100"
  - ุฌูุน ฺฉู: ูุซูุงู "4,500,000 ุชููุงู"
- โ ุฏฺฉูู "ุซุจุช ุณูุงุฑุด" ููุงุด ุฏุงุฏู ูโุดูุฏ

**ฺฺฉ Console:**
```javascript
Calculating price for: {
    book_size: "A5",
    paper_type: "ุชุญุฑุฑ",
    paper_weight: "70",
    print_type: "bw",
    page_count_color: 0,
    page_count_bw: 200,
    quantity: 100,
    // ...
}

Price response: {
    success: true,
    data: {
        price_per_book: 45000,
        quantity: 100,
        total_price: 4500000,
        // ...
    }
}
```

**ุฏุฑ ุตูุฑุช ุฎุทุง:**
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุชูุงู ููุฏูุง ูพุฑ ุดุฏูโุงูุฏ
- Console ุฑุง ุจุฑุง ูพุงูโูุง ุฎุทุง ฺฺฉ ฺฉูุฏ
- ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ูุฑุญูู 7: ุซุจุช ุณูุงุฑุด

**ุงูุฏุงู:**
- ุฑู ุฏฺฉูู "ุซุจุช ุณูุงุฑุด" ฺฉูฺฉ ฺฉูุฏ

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Loading overlay ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ AJAX request ุจู `/wp-json/tabesh/v1/submit-order` ุงุฑุณุงู ูโุดูุฏ
- โ ูพุงู ููููุช ููุงุด ุฏุงุฏู ูโุดูุฏ: "ุณูุงุฑุด ุดูุง ุจุง ููููุช ุซุจุช ุดุฏ!"
- โ ุจุนุฏ ุงุฒ 2 ุซุงูู ุจู ุตูุญู ุณูุงุฑุดุงุช ฺฉุงุฑุจุฑ ููุชูู ูโุดูุฏ

**ฺฺฉ Console:**
```javascript
Submitting order: {
    book_title: "ฺฉุชุงุจ ุชุณุช",
    book_size: "A5",
    paper_type: "ุชุญุฑุฑ",
    paper_weight: "70",
    print_type: "bw",
    page_count_color: 0,
    page_count_bw: 200,
    quantity: 100,
    binding_type: "ุดููุฒ",
    cover_paper_weight: "250",
    cover_weight: "250",
    license_type: "ุฏุงุฑู",
    lamination_type: "ุจุฑุงู",
    extras: [],
    notes: ""
}

Order submission response: {
    success: true,
    data: {order_id: 123},
    message: "ุณูุงุฑุด ุจุง ููููุช ุซุจุช ุดุฏ"
}
```

**ูุงฺฏโูุง ููุฑุฏ ุงูุชุธุงุฑ:**
```
Tabesh: submit_order_rest called
Tabesh: Processing JSON request
Tabesh: Order submitted successfully with ID: 123
```

**ุฏุฑ ุตูุฑุช ุฎุทุง:**
- "ุนููุงู ฺฉุชุงุจ ุงูุฒุงู ุงุณุช" โ ุนููุงู ฺฉุชุงุจ ุฎุงู ุงุณุช
- "ูุทูุงู ุงุจุชุฏุง ููุช ุฑุง ูุญุงุณุจู ฺฉูุฏ" โ ูุญุงุณุจู ููุช ุงูุฌุงู ูุดุฏู
- "ุดูุง ุจุงุฏ ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ" โ ฺฉุงุฑุจุฑ ูุงฺฏู ูุณุช

### ูุฑุญูู 8: ุจุฑุฑุณ ุณูุงุฑุด ุซุจุช ุดุฏู

**ุงูุฏุงู:**
- ุจู ุตูุญู ุณูุงุฑุดุงุช ฺฉุงุฑุจุฑ ุจุฑูุฏ
- ุง ุงุฒ ูพูู ูุฏุฑุช โ ุณูุงุฑุดุงุช ุชุงุจุด

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ุณูุงุฑุด ุฌุฏุฏ ุจุง ุดูุงุฑู ุณูุงุฑุด (ูุซูุงู TB-20251218-1234) ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ ุชูุงู ุฌุฒุฆุงุช ุตุญุญ ุงุณุช:
  - ุนููุงู ฺฉุชุงุจ: "ฺฉุชุงุจ ุชุณุช"
  - ูุทุน: "A5"
  - ฺฉุงุบุฐ: "ุชุญุฑุฑ 70"
  - ฺุงูพ: "ุณุงู ู ุณูุฏ"
  - ุตูุญุงุช: "200"
  - ุชุฑุงฺ: "100"
  - ุตุญุงู: "ุดููุฒ"
  - ููุช ฺฉู: "4,500,000 ุชููุงู"
- โ ูุถุนุช: "ุฏุฑ ุงูุชุธุงุฑ ุชุฃุฏ" (pending)

## ฺฺฉโูุณุช ุนุจโุงุจ

### ูุดฺฉู: ูุฑู ููุงุด ุฏุงุฏู ููโุดูุฏ

- [ ] ุดูุฑุชฺฉุฏ ุตุญุญ ุงุณุช: `[tabesh_order_form_v2]`
- [ ] ุงูุฒููู ุชุงุจุด ูุนุงู ุงุณุช
- [ ] ูฺ ุฎุทุง PHP ุฏุฑ ูุงฺฏโูุง ูุณุช

### ูุดฺฉู: "ูฺ ูุทุน ฺฉุชุงุจ ูพฺฉุฑุจูุฏ ูุดุฏู"

- [ ] Pricing Engine V2 ูุนุงู ุงุณุช (ุชูุธูุงุช โ ููุชโฺฏุฐุงุฑ ูุญุตูู)
- [ ] ุญุฏุงูู ฺฉ ูุงุชุฑุณ ููุช ุชูุธู ุดุฏู
- [ ] ูุงฺฏ ุจุฑุฑุณ ุดุฏู: `Available book sizes count: 0`

### ูุดฺฉู: ููุฏูุง ูพุฑ ููโุดููุฏ

- [ ] JavaScript ููุฏ ุดุฏู (Console โ Sources โ order-form-v2.js)
- [ ] AJAX request ูููู ุงุณุช (Network โ get-allowed-options โ Status 200)
- [ ] Response ุดุงูู `allowed_papers` ู `allowed_bindings` ุงุณุช
- [ ] ูุงฺฏ ุจุฑุฑุณ ุดุฏู: `Options returned - papers count: ...`

### ูุดฺฉู: ุฎุทุง ุฏุฑ ูุญุงุณุจู ููุช

- [ ] ุชูุงู ููุฏูุง ุงูุฒุงู ูพุฑ ุดุฏูโุงูุฏ
- [ ] Request ุจู `/calculate-price` ุงุฑุณุงู ูโุดูุฏ
- [ ] Response ุฏุงุฑุง `success: true` ุงุณุช
- [ ] ูุงฺฏ ุจุฑุฑุณ ุดุฏู: `Tabesh Pricing Engine V2: calculate_price called`

### ูุดฺฉู: ุฎุทุง ุฏุฑ ุซุจุช ุณูุงุฑุด

- [ ] ฺฉุงุฑุจุฑ ูุงฺฏู ุงุณุช
- [ ] ููุช ูุญุงุณุจู ุดุฏู (ุฏฺฉูู "ุซุจุช ุณูุงุฑุด" ูุนุงู ุงุณุช)
- [ ] Request ุจู `/submit-order` ุงุฑุณุงู ูโุดูุฏ
- [ ] ูุงฺฏ ุจุฑุฑุณ ุดุฏู: `Order submitted successfully with ID: ...`

## ูฺฉุงุช ููู

1. **ููุดู ูุจู ุงุฒ ุซุจุชุ ููุช ุฑุง ูุญุงุณุจู ฺฉูุฏ**
   - ุฏฺฉูู "ุซุจุช ุณูุงุฑุด" ููุท ุจุนุฏ ุงุฒ ูุญุงุณุจู ููุช ููุงุด ุฏุงุฏู ูโุดูุฏ

2. **ุชูุงู dropdown ูุง ุจุงุฏ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูพุฑ ุดููุฏ**
   - ุงฺฏุฑ ูพุฑ ููโุดููุฏุ ูุงุชุฑุณ ููุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

3. **ูพุงูโูุง ุฎุทุง ุจุงุฏ ูุงุถุญ ุจุงุดูุฏ**
   - ุงฺฏุฑ ูพุงู ฺฉู ุงุณุชุ ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

4. **Redirect ุงุชููุงุชฺฉ ุจุนุฏ ุงุฒ ุซุจุช**
   - ุงฺฏุฑ redirect ููโุดูุฏุ `userOrdersUrl` ุฑุง ุจุฑุฑุณ ฺฉูุฏ

## ุงุจุฒุงุฑูุง ุฏุจุงฺฏ

### Chrome DevTools

**Console:**
```javascript
// ุจุฑุฑุณ ูุฌูุฏ ุชุงุจุน
typeof initFormV2  // should be "function"

// ุจุฑุฑุณ formState
console.log(formState)

// ุจุฑุฑุณ localized script
console.log(tabeshOrderFormV2)
```

**Network:**
- ููุชุฑ: XHR
- ุจุฑุฑุณ ฺฉูุฏ:
  - `/get-allowed-options` โ Status 200
  - `/calculate-price` โ Status 200
  - `/submit-order` โ Status 201

**Application โ Local Storage:**
- ุจุงุฏ `tabeshOrderFormV2` ุฑุง ุจุจูุฏ

### WordPress Debug Log

**ูุณุฑ:** `/wp-content/debug.log`

**ููุชุฑ ฺฉุฑุฏู ูุงฺฏโูุง:**
```bash
# ูุงฺฏโูุง ูุฑู V2
grep "Tabesh Order Form V2" debug.log

# ูุงฺฏโูุง API
grep "Tabesh V2 API" debug.log

# ูุงฺฏโูุง submit order
grep "submit_order" debug.log
```

## ฺฏุฒุงุฑุด ููููุช

โ ุงฺฏุฑ ุชูุงู ูุฑุงุญู ุจุงูุง ุจุง ููููุช ุงูุฌุงู ุดุฏ:
- ูุฑู V2 ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ
- Cascading fields ูุนุงู ุงุณุช
- ูุญุงุณุจู ููุช ุตุญุญ ุงุณุช
- ุซุจุช ุณูุงุฑุด ูููู ุงุณุช
- Workflow ฺฉุงูู ุงุณุช

๐ **ุชุจุฑฺฉ! ูุฑู V2 ุจู ุฏุฑุณุช ุฑุงูโุงูุฏุงุฒ ุดุฏู ุงุณุช.**

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:

1. **Console ูุฑูุฑฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ** (F12)
2. **Network tab ุฑุง ฺฺฉ ฺฉูุฏ** (AJAX requests)
3. **Debug log ุฑุง ูุทุงูุนู ฺฉูุฏ** (`wp-content/debug.log`)
4. **ูุณุชูุฏุงุช ุฑุง ุจุฎูุงูุฏ** (`V2_FORM_FIX_SUMMARY.md`)

---

**ุชุงุฑุฎ:** 2025-12-18  
**ูุณุฎู ุชุณุช:** 1.0.4
